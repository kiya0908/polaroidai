generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ChargeOrder {
  id                Int       @id @default(autoincrement())
  userId            String    @map("user_id") @db.VarChar(200)
  userInfo          Json?     @map("user_info") @db.Json
  amount            Int
  phase             String    @db.VarChar
  channel           String    @db.VarChar
  currency          String    @db.VarChar
  paymentAt         DateTime? @map("payment_at") @db.Timestamp(6)
  result            Json?     @db.Json
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime  @default(now()) @map("updated_at") @db.Timestamp(6)
  provider_order_id String?   @db.VarChar

  @@map("charge_order")
}

model ChargeProduct {
  id          Int      @id @default(autoincrement())
  amount      Int
  currency    String   @db.VarChar
  locale      String?  @db.VarChar
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime @default(now()) @map("updated_at") @db.Timestamp(6)
  description String?  @db.VarChar
  features    Json?    @db.Json
  name        String   @db.VarChar

  @@unique([name, locale])
  @@map("charge_product")
}

model polaroidai_UserCredit {
  id        Int      @id @default(autoincrement())
  userId    String   @unique @map("user_id") @db.VarChar(200)
  credit    Int
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_user_credit")
}

model polaroidai_UserBilling {
  id          Int      @id @default(autoincrement())
  userId      String   @map("user_id") @db.VarChar(200)
  state       String   @db.VarChar
  amount      Int
  type        String   @db.VarChar
  polaroidId  Int?     @map("polaroid_id")
  description String?  @db.VarChar
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([userId])
  @@map("polaroidai_user_billing")
}

model polaroidai_UserCreditTransaction {
  id        Int      @id @default(autoincrement())
  userId    String   @map("user_id") @db.VarChar(200)
  credit    Int
  balance   Int
  billingId Int?     @map("billing_id")
  type      String   @db.VarChar
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([userId])
  @@map("polaroidai_user_credit_transaction")
}

model polaroidai_UserPaymentInfo {
  id                    Int       @id @default(autoincrement())
  userId                String    @unique @map("user_id") @db.VarChar(200)
  userInfo              Json?     @map("user_info") @db.Json
  creemCustomerId       String?   @map("creem_customer_id") @db.VarChar
  creemSubscriptionId   String?   @map("creem_subscription_id") @db.VarChar
  creemPriceId          String?   @map("creem_price_id") @db.VarChar
  creemCurrentPeriodEnd DateTime? @map("creem_current_period_end") @db.Timestamp(6)
  createdAt             DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt             DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_user_payment_info")
}

model polaroidai_PolaroidGeneration {
  id               Int      @id @default(autoincrement())
  userId           String   @map("user_id") @db.VarChar(200)
  requestId        String   @unique @map("request_id") @db.VarChar
  inputType        String   @map("input_type") @db.VarChar
  inputContent     String?  @map("input_content")
  inputImageUrl    String?  @map("input_image_url") @db.VarChar
  outputImageUrl   String?  @map("output_image_url") @db.VarChar
  thumbnailUrl     String?  @map("thumbnail_url") @db.VarChar
  styleType        String   @default("classic_polaroid") @map("style_type") @db.VarChar(50)
  taskStatus       String   @map("task_status") @db.VarChar
  isPrivate        Boolean? @default(false) @map("is_private")
  downloadNum      Int      @default(0) @map("download_num")
  viewsNum         Int      @default(0) @map("views_num")
  creditCost       Int      @map("credit_cost")
  processingTime   Int?     @map("processing_time")
  geminiRequestId  String?  @map("gemini_request_id") @db.VarChar
  geminiResponse   String?  @map("gemini_response")
  locale           String?  @db.VarChar(64)
  errorMsg         String?  @map("error_msg")
  executeStartTime BigInt?  @map("execute_start_time")
  executeEndTime   BigInt?  @map("execute_end_time")
  retryCount       Int      @default(0) @map("retry_count")
  metadata         Json?    @db.Json
  createdAt        DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([userId])
  @@index([taskStatus])
  @@map("polaroidai_polaroid_generation")
}

model polaroidai_PolaroidDownloads {
  id           Int      @id @default(autoincrement())
  polaroidId   Int      @map("polaroid_id")
  userId       String   @map("user_id") @db.VarChar(200)
  downloadType String   @default("original") @map("download_type") @db.VarChar
  userAgent    String?  @map("user_agent")
  ipAddress    String?  @map("ip_address") @db.VarChar(45)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([polaroidId])
  @@map("polaroidai_polaroid_downloads")
}

model polaroidai_PolaroidViews {
  id           Int      @id @default(autoincrement())
  polaroidId   Int      @map("polaroid_id")
  userId       String   @map("user_id") @db.VarChar(200)
  viewDuration Int?     @map("view_duration")
  referrer     String?  @map("referrer") @db.VarChar(500)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([polaroidId])
  @@map("polaroidai_polaroid_views")
}

model polaroidai_media {
  id        Int      @id @default(autoincrement())
  name      String   @db.VarChar
  key       String   @unique @db.VarChar
  url       String   @db.VarChar
  color     String?  @db.VarChar
  blurhash  String?  @db.VarChar
  fileSize  Int      @map("file_size")
  fileType  String   @map("file_type") @db.VarChar
  md5       String   @unique @db.VarChar
  ext       Json?    @db.Json
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_media")
}

model polaroidai_ChargeProduct {
  id             Int      @id @default(autoincrement())
  amount         Int
  originalAmount Int      @map("original_amount")
  credit         Int
  currency       String   @db.VarChar
  locale         String   @db.VarChar
  title          String   @db.VarChar
  tag            Json?    @db.Json
  message        String?
  state          String   @db.VarChar
  createdAt      DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_charge_product")
}

model polaroidai_ChargeOrder {
  id        Int       @id @default(autoincrement())
  userId    String    @map("user_id") @db.VarChar(200)
  userInfo  Json?     @map("user_info") @db.Json
  amount    Int
  credit    Int
  phase     String    @db.VarChar
  channel   String    @db.VarChar
  currency  String    @db.VarChar
  paymentAt DateTime? @map("payment_at") @db.Timestamp(6)
  result    Json?     @db.Json
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@index([userId])
  @@map("polaroidai_charge_order")
}

model polaroidai_GiftCode {
  id            Int       @id @default(autoincrement())
  code          String    @unique @db.VarChar(256)
  creditAmount  Int       @map("credit_amount")
  used          Boolean?  @default(false)
  usedBy        String?   @map("used_by") @db.VarChar(200)
  usedAt        DateTime? @map("used_at") @db.Timestamp(6)
  transactionId Int?      @map("transaction_id")
  expiredAt     DateTime? @map("expired_at") @db.Timestamp(6)
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamp(6)

  @@map("polaroidai_gift_code")
}

model polaroidai_ClaimedActivityOrder {
  id            Int      @id @default(autoincrement())
  chargeOrderId Int      @map("charge_order_id")
  userId        String   @map("user_id") @db.VarChar(200)
  credit        Int
  activityCode  String   @map("activity_code") @db.VarChar(200)
  transactionId Int?     @map("transaction_id")
  createdAt     DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_claimed_activity_order")
}

model polaroidai_newsletters {
  id        Int       @id @default(autoincrement())
  subject   String?   @db.VarChar(200)
  body      String?
  locale    String?   @db.VarChar(10)
  sentAt    DateTime? @map("sent_at") @db.Timestamp(6)
  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_newsletters")
}

model polaroidai_subscribers {
  id             Int       @id @default(autoincrement())
  email          String?   @unique @db.VarChar(120)
  token          String?   @db.VarChar(50)
  locale         String?   @db.VarChar(10)
  subscribedAt   DateTime? @map("subscribed_at") @db.Timestamp(6)
  unsubscribedAt DateTime? @map("unsubscribed_at") @db.Timestamp(6)
  updatedAt      DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamp(6)

  @@map("polaroidai_subscribers")
}

model conversion_history {
  id                  Int       @id @default(autoincrement())
  user_id             String    @db.VarChar(200)
  original_file_name  String    @db.VarChar(255)
  original_file_size  Int
  converted_file_name String?   @db.VarChar(255)
  download_url        String?
  url_expires_at      DateTime? @db.Timestamp(6)
  conversion_cost     Float?
  status              String    @db.VarChar(50)
  error_message       String?
  created_at          DateTime  @default(now()) @db.Timestamp(6)
  updated_at          DateTime  @default(now()) @db.Timestamp(6)
}

model test_polaroidai_simple {
  id         Int      @id @default(autoincrement())
  user_id    String   @db.VarChar(200)
  content    String?
  created_at DateTime @default(now()) @db.Timestamp(6)
}

model user_conversion_usage {
  id                     Int       @id @default(autoincrement())
  user_id                String    @unique @db.VarChar(200)
  daily_conversion_count Int       @default(0)
  last_conversion_date   DateTime? @db.Date
  created_at             DateTime  @default(now()) @db.Timestamp(6)
  updated_at             DateTime  @default(now()) @db.Timestamp(6)
}

model user_payment_info {
  id                        Int       @id @default(autoincrement())
  user_id                   String    @unique @db.VarChar(200)
  user_info                 Json?     @db.Json
  stripe_customer_id        String?   @db.VarChar
  stripe_subscription_id    String?   @db.VarChar
  stripe_price_id           String?   @db.VarChar
  stripe_current_period_end DateTime? @db.Timestamp(6)
  created_at                DateTime  @default(now()) @db.Timestamp(6)
  updated_at                DateTime  @default(now()) @db.Timestamp(6)
  paypal_subscription_id    String?   @db.VarChar
  subscription_expires_at   DateTime? @db.Timestamp(6)
  subscription_plan_id      String?   @db.VarChar
  subscription_provider     String?   @default("creem") @db.VarChar
  subscription_status       String?   @db.VarChar
  creem_customer_id         String?   @db.VarChar
  creem_subscription_id     String?   @db.VarChar
}
